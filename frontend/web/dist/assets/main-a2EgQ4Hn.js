import{r as n,b as xe,c as ue}from"./vendor-97cK7ltV.js";import{u as he,L as B,a as pe,c as ge,R as fe}from"./router-CbtUVPpw.js";import{l as J}from"./socket-TjCxX7sJ.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))m(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&m(h)}).observe(document,{childList:!0,subtree:!0});function d(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(c){if(c.ep)return;c.ep=!0;const i=d(c);fetch(c.href,i)}})();var oe={exports:{}},Y={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be=n,ye=Symbol.for("react.element"),je=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,Ne=be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,we={key:!0,ref:!0,__self:!0,__source:!0};function ie(l,a,d){var m,c={},i=null,h=null;d!==void 0&&(i=""+d),a.key!==void 0&&(i=""+a.key),a.ref!==void 0&&(h=a.ref);for(m in a)ve.call(a,m)&&!we.hasOwnProperty(m)&&(c[m]=a[m]);if(l&&l.defaultProps)for(m in a=l.defaultProps,a)c[m]===void 0&&(c[m]=a[m]);return{$$typeof:ye,type:l,key:i,ref:h,props:c,_owner:Ne.current}}Y.Fragment=je;Y.jsx=ie;Y.jsxs=ie;oe.exports=Y;var e=oe.exports,de,ce=xe;de=ce.createRoot,ce.hydrateRoot;const ne={},D=(ne==null?void 0:ne.VITE_SERVER_ORIGIN)||(location.hostname==="localhost"||location.hostname==="127.0.0.1"?"http://localhost:4000":`${location.protocol}//${location.hostname}:4000`);function Q(){const l=localStorage.getItem("token");return l?{Authorization:`Bearer ${l}`}:{}}async function le(l){const a=await fetch(`${D}${l}`,{headers:{"Content-Type":"application/json",...Q()}});if(!a.ok)throw new Error(await a.text());return a.json()}async function I(l,a){const d=await fetch(`${D}${l}`,{method:"POST",headers:{"Content-Type":"application/json",...Q()},body:a?JSON.stringify(a):void 0});if(!d.ok)throw new Error(await d.text());return d.json()}async function Se(l,a){const d=await fetch(`${D}${l}`,{method:"PUT",headers:{"Content-Type":"application/json",...Q()},body:a?JSON.stringify(a):void 0});if(!d.ok)throw new Error(await d.text());return d.json()}async function re(l){const a=await fetch(`${D}${l}`,{method:"DELETE",headers:{"Content-Type":"application/json",...Q()}});if(!a.ok)throw new Error(await a.text());return a.json()}const ae={};function ke({onAuthed:l}){const[a,d]=n.useState(""),[m,c]=n.useState(""),[i,h]=n.useState("signup"),[b,u]=n.useState(""),[j,k]=n.useState(!1),[N,x]=n.useState(0);n.useEffect(()=>{const t=localStorage.getItem("token");if(t){const y=(ae==null?void 0:ae.VITE_SERVER_ORIGIN)||(location.hostname==="localhost"||location.hostname==="127.0.0.1"?"http://localhost:4000":`${location.protocol}//${location.hostname}:4000`);fetch(`${y}/api/deployments`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then(E=>{E.ok?l():(localStorage.removeItem("token"),localStorage.removeItem("user"))}).catch(()=>{localStorage.removeItem("token"),localStorage.removeItem("user")})}},[l]),n.useEffect(()=>{if(m.length===0){x(0);return}let t=0;m.length>=6&&(t+=1),m.length>=8&&(t+=1),/[A-Z]/.test(m)&&(t+=1),/[a-z]/.test(m)&&(t+=1),/[0-9]/.test(m)&&(t+=1),/[^A-Za-z0-9]/.test(m)&&(t+=1),x(t)},[m]);async function p(){try{if(u(""),k(!0),!a||!m){u("Please fill in all fields");return}if(i==="signup"&&m.length<6){u("Password must be at least 6 characters long");return}const t=await I(i==="signup"?"/api/signup":"/api/login",{email:a,password:m});localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),l()}catch(t){u(t.message||"Authentication failed")}finally{k(!1)}}function v(t){t.key==="Enter"&&p()}const r=()=>N<=2?"text-red-400":N<=4?"text-yellow-400":"text-green-400",C=()=>N<=2?"Weak":N<=4?"Medium":"Strong";return e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 border border-cyan-400/20",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-cyan-400 to-amber-400 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-slate-900 font-bold text-2xl",children:"DH"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"DeployHub"}),e.jsx("p",{className:"text-gray-400",children:"Deploy applications on your own hardware"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Enter your email",value:a,onChange:t=>d(t.target.value),onKeyPress:v,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none text-white placeholder-gray-400",disabled:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Enter your password",value:m,onChange:t=>c(t.target.value),onKeyPress:v,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none text-white placeholder-gray-400",disabled:j}),i==="signup"&&m&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Password strength:"}),e.jsx("span",{className:r(),children:C()})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${N<=2?"bg-red-400":N<=4?"bg-yellow-400":"bg-green-400"}`,style:{width:`${N/6*100}%`}})})]})]}),b&&e.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm",children:b})}),e.jsx("button",{onClick:p,disabled:j||!a||!m,className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white font-semibold rounded-lg hover:from-cyan-600 hover:to-cyan-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Please wait...":i==="signup"?"Create Account":"Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>h(i==="signup"?"login":"signup"),className:"text-cyan-400 hover:text-cyan-300 text-sm transition-colors",disabled:j,children:i==="signup"?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})})}function Ce({open:l,initialEnv:a,onClose:d,onSave:m}){const[c,i]=n.useState([]),[h,b]=n.useState(!1);if(n.useEffect(()=>{const x=Object.entries(a||{}).map(([p,v])=>({key:p,value:v}));i(x.length?x:[{key:"",value:""}])},[a,l]),!l)return null;function u(x,p,v){i(r=>r.map((C,t)=>t===x?{...C,[p]:v}:C))}function j(){i(x=>[...x,{key:"",value:""}])}function k(x){i(p=>p.filter((v,r)=>r!==x))}async function N(){b(!0);const x={};c.forEach(({key:p,value:v})=>{p&&(x[p]=v)}),await m(x),b(!1),d()}return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{className:"card",style:{width:520,maxWidth:"90vw",background:"#0f1430"},children:[e.jsx("h3",{style:{marginTop:0},children:"Environment Variables"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[c.map((x,p)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:8},children:[e.jsx("input",{placeholder:"KEY",value:x.key,onChange:v=>u(p,"key",v.target.value)}),e.jsx("input",{placeholder:"value",value:x.value,onChange:v=>u(p,"value",v.target.value)}),e.jsx("button",{onClick:()=>k(p),children:"Remove"})]},p)),e.jsx("div",{children:e.jsx("button",{onClick:j,children:"Add variable"})}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx("button",{onClick:d,children:"Cancel"}),e.jsx("button",{className:"cta",onClick:N,disabled:h,children:h?"Saving...":"Save"})]})]})]})})}function De(){const[l,a]=n.useState([]),[d,m]=n.useState(""),[c,i]=n.useState(null),[h,b]=n.useState([]),u=n.useRef(null),[j,k]=n.useState([]),[N,x]=n.useState(!!localStorage.getItem("token")),[p,v]=n.useState(!1),[r,C]=n.useState(null),[t,y]=n.useState(null),[E,P]=n.useState(!1),[M,w]=n.useState(""),[V,F]=n.useState(null),[A,O]=n.useState("connecting");n.useEffect(()=>{const o=localStorage.getItem("user");o&&F(JSON.parse(o)),(async()=>{try{(await fetch(`${D}/api/status`)).ok?(O("connected"),w("")):(O("disconnected"),w("Server is not responding properly"))}catch{O("disconnected"),w("Cannot connect to server. Please check if the server is running.")}})();const g=J(D,{transports:["websocket","polling"],query:{kind:"dashboard"},reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3});return u.current=g,g.on("connect",()=>{O("connected"),w("")}),g.on("disconnect",()=>{O("disconnected")}),g.on("connect_error",$=>{O("disconnected"),w("WebSocket connection failed. Please check if the server is running.")}),g.on("dashboard:agents",$=>{a($),w("")}),g.on("dashboard:deployment-log",({deploymentId:$,line:s})=>{b(f=>c===$?[...f,s]:f)}),g.on("dashboard:deployment-status",({deploymentId:$,status:s})=>{c===$&&b(f=>[...f,`[${new Date().toISOString()}] [dashboard] Status: ${s}`]),N&&L()}),()=>{g.disconnect()}},[c,N]);async function Z(o){if(!d){w("Please enter a GitHub repository URL");return}if(!/^https?:\/\/github\.com\/[^\/]+\/[^\/]+(\.git)?$/.test(d)){w("Please enter a valid GitHub repository URL (e.g., https://github.com/username/repo)");return}try{P(!0),w("");const g=await I("/api/deploy",{agentId:o,repoUrl:d});i(g.deployment.id),b($=>[...$,`[${new Date().toISOString()}] [dashboard] Deployment ${g.deployment.id} started...`]),await L()}catch(g){w(g.message||"Failed to start deployment")}finally{P(!1)}}const H=n.useMemo(()=>l.filter(o=>o.status==="online"),[l]);async function L(){if(N)try{const o=await le("/api/deployments");k(o.deployments)}catch(o){o.message.includes("unauthorized")||o.message.includes("Invalid token")?(localStorage.removeItem("token"),localStorage.removeItem("user"),x(!1),w("Session expired. Please log in again.")):w("Failed to load deployments")}}async function z(o,S){try{P(!0),await I(`/api/deployments/${o}/action`,{action:S}),await L()}catch(g){g.message.includes("unauthorized")||g.message.includes("Invalid token")?(localStorage.removeItem("token"),localStorage.removeItem("user"),x(!1),w("Session expired. Please log in again.")):w(`Failed to ${S} deployment: ${g.message}`)}finally{P(!1)}}async function X(o){try{P(!0),await re(`/api/deployments/${o}`),c===o&&i(null),await L()}catch(S){S.message.includes("unauthorized")||S.message.includes("Invalid token")?(localStorage.removeItem("token"),localStorage.removeItem("user"),x(!1),w("Session expired. Please log in again.")):w(`Failed to delete deployment: ${S.message}`)}finally{P(!1)}}function ee(o){C(o),v(!0)}async function se(o){r&&(await Se(`/api/deployments/${r.id}/env`,{env:o}),await L())}async function te(){if(!d){alert("Enter GitHub repo URL");return}try{const o=await I("/api/ai/suggest",{repoUrl:d});y(o.suggestion)}catch(o){y({error:o.message||"Failed to fetch suggestion"})}}function _(o){const S=o.join(`
`).toLowerCase(),g=[];return S.includes("eaddrinuse")&&g.push("Port in use: try changing port or stop previous process."),(S.includes("command not found")||S.includes("npm: not found"))&&g.push("Missing runtime: ensure Node.js/npm installed on agent."),S.includes("permission denied")&&g.push("Permission issue: check file permissions or run without sudo-sensitive steps."),S.includes("fatal: could not read from remote repository")&&g.push("Git auth required: use public repo or provide read access."),g.length===0&&g.push("No obvious errors detected."),g}return n.useEffect(()=>{localStorage.getItem("token")&&fetch(`${D}/api/status`).then(S=>{S.ok||(localStorage.removeItem("token"),localStorage.removeItem("user"),x(!1))}).catch(()=>{})},[]),N?e.jsxs("div",{className:"min-h-screen bg-slate-900 text-gray-100",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-effect",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-amber-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:"DH"})}),e.jsx("span",{className:"text-xl font-bold",children:"DeployHub"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${A==="connected"?"bg-green-400":A==="connecting"?"bg-yellow-400":"bg-red-400"}`}),e.jsx("span",{className:"text-sm text-gray-400",children:A==="connected"?"Connected":A==="connecting"?"Connecting...":"Disconnected"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Server: ",D]}),V&&e.jsxs("div",{className:"text-sm text-gray-400",children:["Welcome, ",V.email]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),x(!1),w("")},className:"px-3 py-1 text-sm border border-gray-600 rounded hover:border-gray-400",children:"Logout"}),e.jsx("button",{onClick:()=>{localStorage.clear(),x(!1),w(""),window.location.reload()},className:"px-3 py-1 text-sm border border-red-600 text-red-400 rounded hover:border-red-400",title:"Clear all data and restart",children:"Clear All"})]})]})})}),e.jsx("section",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"DeployHub Dashboard"}),e.jsx("p",{className:"text-xl text-gray-300",children:"Deploy applications on your own hardware"})]}),M&&e.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-red-400",children:M}),e.jsx("button",{onClick:()=>w(""),className:"text-red-400 hover:text-red-300",children:"âœ•"})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 flex items-center space-x-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400"}),e.jsx("span",{className:"text-white",children:"Processing..."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[e.jsx(G,{label:"Active Deployments",value:String(j.filter(o=>o.status==="running"||o.status==="succeeded").length),color:"text-cyan-400"}),e.jsx(G,{label:"Connected Devices",value:String(H.length),color:"text-amber-400"}),e.jsx(G,{label:"Success Rate",value:`${Math.round(j.filter(o=>o.status==="succeeded").length/Math.max(1,j.length)*100)}%`,color:"text-green-400"}),e.jsx(G,{label:"Total Builds",value:String(j.length),color:"text-amber-400"})]})]})}),e.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Agents & Deployments"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connected Agents"}),e.jsxs("div",{className:"space-y-3",children:[l.map(o=>{var S,g,$;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.name}),e.jsxs("div",{className:"text-sm text-gray-400",children:[((S=o.specs)==null?void 0:S.cpuCount)||0," CPU, ",(($=(g=o.specs)==null?void 0:g.memory)==null?void 0:$.totalMb)||0,"MB"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o.status==="online"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o.status}),e.jsx("button",{onClick:()=>Z(o.id),disabled:o.status!=="online"||E||!d,className:"px-3 py-1 bg-cyan-500 text-white rounded text-sm disabled:opacity-50 hover:bg-cyan-600 transition-colors",children:E?"Deploying...":"Deploy"})]})]},o.id)}),l.length===0&&e.jsx("div",{className:"text-gray-400",children:"No agents connected"})]})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Deployments"}),e.jsxs("div",{className:"space-y-3",children:[j.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.name}),e.jsx("div",{className:"text-sm text-gray-400",children:o.repoUrl})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o.status==="succeeded"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o.status}),e.jsx("button",{onClick:()=>z(o.id,"start"),className:"px-2 py-1 text-xs border rounded",children:"Start"}),e.jsx("button",{onClick:()=>z(o.id,"stop"),className:"px-2 py-1 text-xs border rounded",children:"Stop"}),e.jsx("button",{onClick:()=>z(o.id,"restart"),className:"px-2 py-1 text-xs border rounded",children:"Restart"}),e.jsx("button",{onClick:()=>ee(o),className:"px-2 py-1 text-xs border rounded",children:"Env"}),e.jsx("button",{onClick:()=>X(o.id),className:"px-2 py-1 text-xs border rounded text-red-400",children:"Delete"})]})]},o.id)),j.length===0&&e.jsx("div",{className:"text-gray-400",children:"No deployments yet"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Deployment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{placeholder:"https://github.com/user/repo.git",value:d,onChange:o=>m(o.target.value),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"}),e.jsx("button",{onClick:te,className:"w-full py-2 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30",children:"AI Suggest"}),t&&e.jsxs("div",{className:"p-3 bg-slate-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"AI Suggestion"}),"error"in t?e.jsx("div",{className:"text-red-400 text-sm",children:t.error}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:["Runtime: ",e.jsx("b",{children:t.runtime})]}),e.jsxs("div",{children:["Port: ",e.jsx("b",{children:t.port})]}),e.jsxs("div",{children:["Build: ",e.jsx("code",{className:"text-xs",children:t.build||"n/a"})]}),e.jsxs("div",{children:["Start: ",e.jsx("code",{className:"text-xs",children:t.start})]})]})]})]})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Logs"}),e.jsx("pre",{className:"bg-slate-800 p-3 rounded-lg text-sm h-48 overflow-auto text-green-400",children:h.join(`
`)}),e.jsxs("div",{className:"mt-3 p-3 bg-slate-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"AI Hints"}),e.jsx("ul",{className:"text-sm space-y-1",children:_(h).map((o,S)=>e.jsx("li",{children:o},S))})]})]})]})]})}),e.jsx(Ce,{open:p,initialEnv:(r==null?void 0:r.env)||{},onClose:()=>v(!1),onSave:se})]}):e.jsx(ke,{onAuthed:()=>{x(!0),L()}})}function G({label:l,value:a,color:d}){return e.jsxs("div",{className:"metric-card p-6 rounded-xl border border-cyan-400/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:l}),e.jsx("span",{className:"text-lg",children:"â—"})]}),e.jsx("div",{className:`text-3xl font-bold ${d}`,children:a})]})}function $e(){const[l,a]=n.useState("user@example.com"),[d,m]=n.useState("password"),[c,i]=n.useState(""),h=he();async function b(){try{i("");const u=await I("/api/signup",{email:l,password:d});localStorage.setItem("token",u.token),h("/")}catch(u){i(u.message||"registration failed")}}return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{maxWidth:420,margin:"40px auto"},children:[e.jsx("h3",{style:{marginTop:0},children:"Create your DeployHub account"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsx("input",{placeholder:"email",value:l,onChange:u=>a(u.target.value)}),e.jsx("input",{placeholder:"password",type:"password",value:d,onChange:u=>m(u.target.value)}),c&&e.jsx("div",{className:"muted",style:{color:"#ff9b9b"},children:c}),e.jsx("button",{className:"cta",onClick:b,children:"Sign up"}),e.jsxs("div",{className:"muted",children:["Already have an account? ",e.jsx(B,{to:"/",children:"Login"})]})]})]})})}function Ee(){const[l,a]=n.useState([]),[d,m]=n.useState([]),[c,i]=n.useState(!1),[h,b]=n.useState("https://github.com/user/repo.git"),[u,j]=n.useState([]),k=n.useRef(null),N=!!localStorage.getItem("token");n.useEffect(()=>{const r=J(D,{transports:["websocket"],query:{kind:"dashboard"}});return k.current=r,r.on("dashboard:agents",C=>a(C)),r.on("dashboard:deployment-status",()=>p()),r.on("dashboard:deployment-log",()=>{}),p(),()=>{r.disconnect()}},[]);const x=n.useMemo(()=>l.filter(r=>r.status==="online"),[l]);async function p(){const r=await le("/api/deployments");m(r.deployments)}async function v(){if(!h||u.length===0)return alert("Select one or more agents and provide a repo URL");try{await Promise.all(u.map(r=>I("/api/deploy",{agentId:r,repoUrl:h})))}catch(r){alert(r.message||"Failed to create deployment (are you logged in?)");return}i(!1),await p()}return N?e.jsxs("div",{className:"min-h-screen bg-slate-900 text-gray-100",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-effect",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-amber-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:"DH"})}),e.jsx("span",{className:"text-xl font-bold",children:"DeployHub"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx(B,{to:"/",className:"text-gray-300 hover:text-cyan-400",children:"Dashboard"}),e.jsx(B,{to:"/hardware",className:"text-gray-300 hover:text-cyan-400",children:"Hardware"}),e.jsx(B,{to:"/deployments",className:"text-gray-300 hover:text-cyan-400",children:"Deployments"}),e.jsxs("span",{className:"text-gray-400",children:["Server: ",D]})]})]})})}),e.jsx("section",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6",children:"Deploy on Your Hardware"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-3xl mx-auto",children:"Transform your devices into a CI/CD platform."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("button",{onClick:()=>i(!0),className:"px-8 py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white font-semibold rounded-lg hover:from-cyan-600 hover:to-cyan-700 transition-all",children:"New Deployment"}),e.jsx("a",{href:"#agents",className:"px-8 py-3 border border-cyan-400 text-cyan-400 font-semibold rounded-lg hover:bg-cyan-400 hover:text-slate-900 transition-all",children:"Connected Hardware"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[e.jsx(q,{label:"Active Deployments",value:String(d.filter(r=>r.status==="running"||r.status==="succeeded").length),color:"text-cyan-400"}),e.jsx(q,{label:"Connected Devices",value:String(x.length),color:"text-amber-400"}),e.jsx(q,{label:"Success Rate",value:`${Math.round(d.filter(r=>r.status==="succeeded").length/Math.max(1,d.length)*100)}%`,color:"text-green-400"}),e.jsx(q,{label:"Total Builds",value:String(d.length),color:"text-amber-400"})]})]})}),e.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Active Deployments"}),e.jsx("button",{onClick:p,className:"text-cyan-400 hover:text-cyan-300",children:"Refresh"})]}),e.jsxs("div",{className:"space-y-4",children:[d.map(r=>e.jsxs("div",{className:"deployment-card glass-effect rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:r.name}),e.jsx("div",{className:"text-sm text-gray-400",children:r.repoUrl})]}),e.jsx("div",{className:`badge ${r.status==="succeeded"||r.status==="running"?"online":"offline"}`,children:r.status})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(B,{to:"/deployments",className:"px-2 py-1 border rounded hover:border-cyan-400",children:"View Logs"}),e.jsx("button",{onClick:()=>I(`/api/deployments/${r.id}/action`,{action:"start"}).then(p),className:"px-2 py-1 border rounded hover:border-gray-400",children:"Start"}),e.jsx("button",{onClick:()=>I(`/api/deployments/${r.id}/action`,{action:"stop"}).then(p),className:"px-2 py-1 border rounded hover:border-gray-400",children:"Stop"}),e.jsx("button",{onClick:()=>I(`/api/deployments/${r.id}/action`,{action:"restart"}).then(p),className:"px-2 py-1 border rounded hover:border-gray-400",children:"Restart"}),e.jsx("button",{onClick:()=>re(`/api/deployments/${r.id}`).then(p),className:"px-2 py-1 border rounded hover:border-red-400 text-red-300",children:"Delete"})]})]},r.id)),d.length===0&&e.jsx("div",{className:"text-gray-400",children:"No deployments yet."})]})]}),e.jsx("div",{className:"space-y-8",id:"agents",children:e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Hardware Status"}),e.jsxs("div",{className:"space-y-3",children:[l.map(r=>{var C,t,y;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsxs("div",{className:"text-sm text-gray-400",children:[((C=r.specs)==null?void 0:C.cpuCount)||0," CPU, ",((y=(t=r.specs)==null?void 0:t.memory)==null?void 0:y.totalMb)||0,"MB"]})]}),e.jsx("span",{className:`badge ${r.status}`,children:r.status})]},r.id)}),l.length===0&&e.jsx("div",{className:"text-gray-400",children:"No agents connected."})]})]})})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 max-w-2xl w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"New Deployment"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"GitHub Repository"}),e.jsx("input",{value:h,onChange:r=>b(r.target.value),placeholder:"https://github.com/user/repo.git",className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Target Devices"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[x.map(r=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded border border-slate-600 hover:border-cyan-400",children:[e.jsx("input",{type:"checkbox",checked:u.includes(r.id),onChange:C=>{j(t=>C.target.checked?[...t,r.id]:t.filter(y=>y!==r.id))}}),e.jsx("span",{children:r.name})]},r.id)),x.length===0&&e.jsx("div",{className:"text-gray-400",children:"No agents online"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 text-gray-400 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:v,className:"px-6 py-2 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-lg hover:from-cyan-600 hover:to-cyan-700",children:"Create Deployment"})]})]})]})})})]}):e.jsx("div",{className:"min-h-screen bg-slate-900 text-gray-100 flex items-center justify-center p-6",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to DeployHub"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Please create an account or log in to access the dashboard."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(B,{to:"/register",className:"px-6 py-2 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-lg hover:from-cyan-600 hover:to-cyan-700",children:"Create account"}),e.jsx(B,{to:"/",className:"px-6 py-2 border border-cyan-400 text-cyan-400 rounded-lg hover:bg-cyan-400 hover:text-slate-900",children:"Login"})]})]})})}function q({label:l,value:a,color:d}){return e.jsxs("div",{className:"metric-card p-6 rounded-xl border border-cyan-400/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:l}),e.jsx("span",{className:"text-lg",children:"â—"})]}),e.jsx("div",{className:`text-3xl font-bold ${d}`,children:a})]})}function Re(){const[l,a]=n.useState([]),d=n.useRef(null);n.useEffect(()=>{const c=J(D,{transports:["websocket"],query:{kind:"dashboard"}});return d.current=c,c.on("dashboard:agents",i=>a(i)),()=>{c.disconnect()}},[]);const m=n.useMemo(()=>l.filter(c=>c.status==="online"),[l]);return e.jsxs("div",{className:"min-h-screen bg-slate-900 text-gray-100",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-effect",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-amber-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:"DH"})}),e.jsx("span",{className:"text-xl font-bold",children:"DeployHub"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Server: ",D]})]})})}),e.jsxs("section",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Hardware Management"}),e.jsx("p",{className:"text-xl text-gray-300",children:"Connect and monitor your personal devices."})]}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[e.jsx("a",{href:`${D}/public/agents/install-windows.ps1`,className:"px-8 py-3 border border-amber-400 text-amber-400 font-semibold rounded-lg hover:bg-amber-400 hover:text-slate-900 transition-all",children:"Download Windows Agent"}),e.jsx("a",{href:`${D}/public/agents/install-linux.sh`,className:"px-8 py-3 border border-cyan-400 text-cyan-400 font-semibold rounded-lg hover:bg-cyan-400 hover:text-slate-900 transition-all",children:"Download Linux Agent"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Connected Devices"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx("span",{className:"text-green-400",children:"â—"}),e.jsxs("span",{children:[m.length," Online"]}),e.jsx("span",{className:"text-red-400 ml-4",children:"â—"}),e.jsxs("span",{children:[l.length-m.length," Offline"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.map(c=>{var i,h,b,u,j;return e.jsxs("div",{className:"device-card glass-effect rounded-xl p-6 border border-cyan-400/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-semibold text-lg",children:c.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.status==="online"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:c.status.toUpperCase()})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[((i=c.specs)==null?void 0:i.platform)||""," ",((h=c.specs)==null?void 0:h.arch)||""]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[((b=c.specs)==null?void 0:b.cpuCount)||0," CPU, ",((j=(u=c.specs)==null?void 0:u.memory)==null?void 0:j.totalMb)||0,"MB"]})]},c.id)}),l.length===0&&e.jsx("div",{className:"text-gray-400",children:"No devices connected yet."})]})]}),e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Overview"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(W,{label:"Total Devices",value:String(l.length)}),e.jsx(W,{label:"Online Devices",value:String(m.length)}),e.jsx(W,{label:"Total CPU Cores",value:String(l.reduce((c,i)=>{var h;return c+(((h=i.specs)==null?void 0:h.cpuCount)||0)},0))}),e.jsx(W,{label:"Total Memory (MB)",value:String(l.reduce((c,i)=>{var h,b;return c+(((b=(h=i.specs)==null?void 0:h.memory)==null?void 0:b.totalMb)||0)},0))})]})]})})]})]})]})]})}function W({label:l,value:a}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:l}),e.jsx("span",{className:"text-2xl font-bold text-cyan-400",children:a})]})}function Ie(){const[l,a]=n.useState([]),[d,m]=n.useState([]),[c,i]=n.useState(!1),[h,b]=n.useState(!1),[u,j]=n.useState(null),[k,N]=n.useState(0),[x,p]=n.useState(""),[v,r]=n.useState("main"),[C,t]=n.useState("Auto-detect"),[y,E]=n.useState(""),[P,M]=n.useState(""),[w,V]=n.useState(""),[F,A]=n.useState([{key:"",value:""}]),O=n.useRef(null);n.useEffect(()=>{const s=J(D,{transports:["websocket"],query:{kind:"dashboard"}});return O.current=s,s.on("dashboard:agents",f=>a(f)),s.on("dashboard:deployment-status",()=>H()),s.on("dashboard:deployment-log",({deploymentId:f,line:R})=>{m(T=>T.map(U=>U.id===f?{...U,logs:[...U.logs,R]}:U))}),H(),()=>{s.disconnect()}},[]);const Z=n.useMemo(()=>l.filter(s=>s.status==="online"),[l]);async function H(){const s=await le("/api/deployments");m(s.deployments)}async function L(){if(!x||!w)return alert("Fill in all required fields");try{const s=F.reduce((f,{key:R,value:T})=>R?{...f,[R]:T}:f,{});await I("/api/deploy",{agentId:w,repoUrl:x}),i(!1),await H()}catch(s){alert(s.message||"Failed to create deployment")}}async function z(s,f){await I(`/api/deployments/${s}/action`,{action:f}),await H()}async function X(s){await re(`/api/deployments/${s}`),await H()}function ee(){if(!x)return alert("Enter repository URL");x.includes("react")||x.includes("next")?(t("React"),E("npm run build"),M("npm start")):x.includes("node")||x.includes("express")?(t("Node.js"),E("npm install"),M("npm start")):(x.includes("python")||x.includes("flask"))&&(t("Python"),E("pip install -r requirements.txt"),M("python app.py")),N(1)}function se(){A(s=>[...s,{key:"",value:""}])}function te(s){A(f=>f.filter((R,T)=>T!==s))}function _(s,f,R){A(T=>T.map((U,me)=>me===s?{...U,[f]:R}:U))}function o(s){j(s),b(!0)}const S=d.filter(s=>s.status==="running"||s.status==="succeeded").length,g=d.filter(s=>s.status==="building").length,$=d.filter(s=>s.status==="error").length;return e.jsxs("div",{className:"min-h-screen bg-slate-900 text-gray-100",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-effect",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-amber-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:"DH"})}),e.jsx("span",{className:"text-xl font-bold",children:"DeployHub"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Server: ",D]})]})})}),e.jsx("section",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Deployment Management"}),e.jsx("p",{className:"text-xl text-gray-300",children:"Create, monitor, and manage your application deployments"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[e.jsx("button",{onClick:()=>i(!0),className:"px-8 py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white font-semibold rounded-lg hover:from-cyan-600 hover:to-cyan-700 transition-all",children:"New Deployment"}),e.jsx("button",{className:"px-8 py-3 border border-amber-400 text-amber-400 font-semibold rounded-lg hover:bg-amber-400 hover:text-slate-900 transition-all",children:"Bulk Actions"})]})]})}),e.jsx("section",{className:"px-4 sm:px-6 lg:px-8 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"All Deployments"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"Running"}),e.jsx("option",{children:"Building"}),e.jsx("option",{children:"Stopped"}),e.jsx("option",{children:"Error"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[d.map(s=>{var f;return e.jsxs("div",{className:"deployment-card glass-effect rounded-xl p-6 border border-cyan-400/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.status==="running"?"bg-green-400":s.status==="building"?"bg-amber-400":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.repoUrl})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.status==="succeeded"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.status})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(s),className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",title:"View Logs",children:"ðŸ“‹"}),e.jsx("button",{onClick:()=>z(s.id,"restart"),className:"p-2 text-gray-400 hover:text-amber-400 transition-colors",title:"Restart",children:"ðŸ”„"}),e.jsx("button",{onClick:()=>z(s.id,"stop"),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Stop",children:"â¹ï¸"}),e.jsx("button",{onClick:()=>X(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete",children:"ðŸ—‘ï¸"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Agent"}),e.jsx("p",{className:"font-medium",children:((f=l.find(R=>R.id===s.agentId))==null?void 0:f.name)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Status"}),e.jsx("p",{className:"font-medium",children:s.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Logs"}),e.jsxs("p",{className:"font-medium",children:[s.logs.length," lines"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Health"}),e.jsx("p",{className:"font-medium text-green-400",children:"98%"})]})]})]},s.id)}),d.length===0&&e.jsx("div",{className:"text-gray-400",children:"No deployments yet"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Deployment Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(K,{label:"Total Deployments",value:String(d.length)}),e.jsx(K,{label:"Running",value:String(S)}),e.jsx(K,{label:"Building",value:String(g)}),e.jsx(K,{label:"Failed",value:String($)})]})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AI Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-slate-800 rounded-lg border border-amber-400/20",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Consider implementing health checks for better monitoring."})]})}),e.jsx("div",{className:"p-3 bg-slate-800 rounded-lg border border-cyan-400/20",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Build times can be optimized with proper caching strategies."})]})})]})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"New Deployment"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`deployment-step p-6 rounded-lg border ${k>=0?"border-cyan-400/20":"border-slate-600"}`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3 ${k>=0?"bg-cyan-500 text-white":"bg-slate-600 text-white"}`,children:"1"}),"Connect Repository"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"GitHub Repository URL"}),e.jsx("input",{value:x,onChange:s=>p(s.target.value),placeholder:"https://github.com/username/repository",className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Branch"}),e.jsx("input",{value:v,onChange:s=>r(s.target.value),placeholder:"main",className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"})]}),e.jsx("button",{onClick:ee,className:"px-6 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Analyze Repository"})]})]}),e.jsxs("div",{className:`deployment-step p-6 rounded-lg border ${k>=1?"border-cyan-400/20":"border-slate-600"}`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3 ${k>=1?"bg-cyan-500 text-white":"bg-slate-600 text-white"}`,children:"2"}),"Configure Build"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Type"}),e.jsxs("select",{value:C,onChange:s=>t(s.target.value),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none",children:[e.jsx("option",{children:"Auto-detect"}),e.jsx("option",{children:"Node.js"}),e.jsx("option",{children:"Python"}),e.jsx("option",{children:"React"}),e.jsx("option",{children:"Vue.js"}),e.jsx("option",{children:"Static Site"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Build Command"}),e.jsx("input",{value:y,onChange:s=>E(s.target.value),placeholder:"npm run build",className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Command"}),e.jsx("input",{value:P,onChange:s=>M(s.target.value),placeholder:"npm start",className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"})]})]})]}),e.jsxs("div",{className:`deployment-step p-6 rounded-lg border ${k>=2?"border-cyan-400/20":"border-slate-600"}`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3 ${k>=2?"bg-cyan-500 text-white":"bg-slate-600 text-white"}`,children:"3"}),"Select Target Device"]}),e.jsx("div",{className:"space-y-3",children:Z.map(s=>e.jsxs("label",{className:"flex items-center space-x-3 p-4 bg-slate-800 rounded-lg border border-slate-600 cursor-pointer hover:border-cyan-400 transition-colors",children:[e.jsx("input",{type:"radio",name:"device",value:s.id,checked:w===s.id,onChange:f=>V(f.target.value),className:"text-cyan-400 focus:ring-cyan-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-green-400 text-sm",children:"â—"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Online and ready"})]})]},s.id))})]}),e.jsxs("div",{className:`deployment-step p-6 rounded-lg border ${k>=3?"border-cyan-400/20":"border-slate-600"}`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3 ${k>=3?"bg-cyan-500 text-white":"bg-slate-600 text-white"}`,children:"4"}),"Environment Variables"]}),e.jsxs("div",{className:"space-y-3",children:[F.map((s,f)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{value:s.key,onChange:R=>_(f,"key",R.target.value),placeholder:"KEY",className:"flex-1 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"}),e.jsx("input",{value:s.value,onChange:R=>_(f,"value",R.target.value),placeholder:"value",className:"flex-1 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none"}),e.jsx("button",{onClick:()=>te(f),className:"px-3 py-2 text-red-400 hover:text-red-300 transition-colors",children:"âœ•"})]},f)),e.jsx("button",{onClick:se,className:"px-4 py-2 border border-cyan-400 text-cyan-400 rounded-lg hover:bg-cyan-400 hover:text-slate-900 transition-colors",children:"Add Variable"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-600",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:L,className:"px-6 py-2 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-lg hover:from-cyan-600 hover:to-cyan-700 transition-all",children:"Create Deployment"})]})]})]})})}),h&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:e.jsxs("div",{className:"glass-effect rounded-xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Build Logs - ",u.name]}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg mb-4 h-96 overflow-y-auto font-mono text-sm",children:[u.logs.map((s,f)=>e.jsx("div",{className:"text-green-400 mb-1",children:s},f)),u.logs.length===0&&e.jsx("div",{className:"text-gray-400",children:"No logs available"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"px-4 py-2 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30 transition-colors",children:"Auto-scroll: ON"}),e.jsx("button",{className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"Clear Logs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Build Status:"}),e.jsx("span",{className:"text-amber-400 text-sm",children:u.status})]})]})]})})})]})}function K({label:l,value:a}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:l}),e.jsx("span",{className:"text-2xl font-bold text-cyan-400",children:a})]})}function Pe(){const{linkId:l}=pe(),[a,d]=n.useState(null),[m,c]=n.useState([]),[i,h]=n.useState(!0),[b,u]=n.useState(""),[j,k]=n.useState(!1),[N,x]=n.useState(""),[p,v]=n.useState([]);n.useEffect(()=>{if(!l){u("Invalid deployment link"),h(!1);return}r()},[l]);async function r(){try{const t=await fetch(`${D}/api/deploy/${l}`),y=await t.json();if(!t.ok)throw new Error(y.error||"Failed to load deployment configuration");d(y.config),c(y.agents)}catch(t){u(t.message)}finally{h(!1)}}async function C(){if(!N){u("Please select an agent");return}try{k(!0),u("");const t=await I("/api/deploy",{agentId:N,repoUrl:a.repoUrl,branch:a.branch,buildCommand:a.buildCommand,startCommand:a.startCommand,env:a.env});v(y=>[...y,`[${new Date().toISOString()}] Deployment started successfully!`]),v(y=>[...y,`[${new Date().toISOString()}] Deployment ID: ${t.deployment.id}`]),setTimeout(()=>{v(y=>[...y,`[${new Date().toISOString()}] Deployment completed!`]),k(!1)},3e3)}catch(t){u(t.message||"Deployment failed"),k(!1)}}return i?e.jsx("div",{className:"min-h-screen bg-slate-900 text-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading deployment configuration..."})]})}):b?e.jsx("div",{className:"min-h-screen bg-slate-900 text-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"glass-effect rounded-xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"text-red-400 text-6xl mb-4",children:"âš ï¸"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Deployment Link Error"}),e.jsx("p",{className:"text-gray-300 mb-6",children:b}),e.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Go to DeployHub"})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-900 text-gray-100",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-effect",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-amber-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:"DH"})}),e.jsx("span",{className:"text-xl font-bold",children:"DeployHub"})]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Quick Deploy"})]})})}),e.jsx("section",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Quick Deploy"}),e.jsx("p",{className:"text-xl text-gray-300",children:"Deploy this repository with one click"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Repository Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Repository"}),e.jsx("p",{className:"text-white font-mono text-sm break-all",children:a.repoUrl})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Branch"}),e.jsx("p",{className:"text-white",children:a.branch})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Build Command"}),e.jsx("p",{className:"text-white font-mono text-sm",children:a.buildCommand})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Start Command"}),e.jsx("p",{className:"text-white font-mono text-sm",children:a.startCommand})]}),Object.keys(a.env||{}).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Environment Variables"}),e.jsx("div",{className:"space-y-1",children:Object.entries(a.env).map(([t,y])=>e.jsxs("div",{className:"text-white font-mono text-sm",children:[t,"=",String(y)]},t))})]})]})]}),e.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Deploy Now"}),b&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm",children:b})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Agent"}),e.jsxs("select",{value:N,onChange:t=>x(t.target.value),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg focus:border-cyan-400 focus:outline-none",disabled:j,children:[e.jsx("option",{value:"",children:"Choose an agent..."}),m.filter(t=>t.status==="online").map(t=>{var y,E,P;return e.jsxs("option",{value:t.id,children:[t.name," (",((y=t.specs)==null?void 0:y.cpuCount)||0," CPU, ",((P=(E=t.specs)==null?void 0:E.memory)==null?void 0:P.totalMb)||0,"MB)"]},t.id)})]})]}),m.filter(t=>t.status==="online").length===0&&e.jsx("div",{className:"p-3 bg-amber-500/20 border border-amber-500/30 rounded-lg",children:e.jsx("p",{className:"text-amber-400 text-sm",children:"No agents are currently online. Please wait for an agent to come online or contact the administrator."})}),e.jsx("button",{onClick:C,disabled:!N||j||m.filter(t=>t.status==="online").length===0,className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white font-semibold rounded-lg hover:from-cyan-600 hover:to-cyan-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Deploying...":"Deploy Repository"})]}),p.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Deployment Logs"}),e.jsx("div",{className:"bg-slate-800 p-4 rounded-lg h-48 overflow-y-auto",children:e.jsx("pre",{className:"text-green-400 text-sm font-mono",children:p.join(`
`)})})]})]})]})]})})]})}const Ae=ge([{path:"/",element:e.jsx(De,{})},{path:"/register",element:e.jsx($e,{})},{path:"/fancy",element:e.jsx(Ee,{})},{path:"/hardware",element:e.jsx(Re,{})},{path:"/deployments",element:e.jsx(Ie,{})},{path:"/deploy/:linkId",element:e.jsx(Pe,{})}]),Oe=document.getElementById("root");de(Oe).render(e.jsx(ue.StrictMode,{children:e.jsx(fe,{router:Ae})}));
